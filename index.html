<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Meal & Training Planner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .profile-selector {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .profile-selector h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .profile-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .profile-btn {
            padding: 30px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .profile-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .profile-btn.male {
            background: linear-gradient(135deg, #e3f2fd 0%, #90caf9 100%);
            border-color: #2196f3;
        }

        .profile-btn.female {
            background: linear-gradient(135deg, #fce4ec 0%, #f48fb1 100%);
            border-color: #e91e63;
        }

        .profile-btn.active {
            border-width: 5px;
            transform: scale(1.05);
        }

        .profile-btn .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .profile-btn h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .profile-btn .targets {
            font-size: 0.9em;
            color: #555;
            line-height: 1.6;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card .icon {
            font-size: 1.5em;
        }

        .meal-today {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
        }

        .training-today {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .progress-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .quick-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #667eea;
            color: white;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .btn:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .btn-small {
            padding: 8px 15px;
            font-size: 0.85em;
        }

        .meal-selection {
            margin-top: 15px;
        }

        .meal-item {
            padding: 12px;
            background: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .meal-item h4 {
            color: #333;
            margin-bottom: 5px;
        }

        .meal-item p {
            color: #666;
            font-size: 0.9em;
        }

        .date-selector {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .date-selector h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .date-selector input {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
        }

        #todaysMeals, #todaysTraining {
            min-height: 200px;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px 20px;
        }

        .empty-state .icon {
            font-size: 3em;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-box .label {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .profile-buttons {
                grid-template-columns: 1fr;
            }
        }

        .nav-menu {
            background: white;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-menu a {
            color: #667eea;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-menu a:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèãÔ∏è Daily Meal & Training Planner</h1>
            <p>Your personalized path to 13% body fat</p>
        </div>

        <div class="nav-menu">
            <a href="index.html">üè† Dashboard</a>
            <a href="meal_plan_pdf.html">üìã All Meal Plans</a>
            <a href="male_training_pdf.html">üí™ Male Training</a>
            <a href="female_training_pdf.html">üèÉ‚Äç‚ôÄÔ∏è Female Training</a>
        </div>

        <div class="profile-selector">
            <h2>Select Your Profile</h2>
            <div class="profile-buttons">
                <div class="profile-btn male" onclick="selectProfile('male')">
                    <div class="icon">üë®</div>
                    <h3>Male Profile</h3>
                    <div class="targets">
                        üéØ 1900 kcal/day<br>
                        üí™ 170-185g protein<br>
                        üåæ 180g carbs<br>
                        ü•ë 50g fat
                    </div>
                </div>
                <div class="profile-btn female" onclick="selectProfile('female')">
                    <div class="icon">üë©</div>
                    <h3>Female Profile</h3>
                    <div class="targets">
                        üéØ 1400 kcal/day<br>
                        üí™ 120-135g protein<br>
                        üåæ 140g carbs<br>
                        ü•ë 40g fat
                    </div>
                </div>
            </div>
        </div>

        <div class="date-selector">
            <h3>üìÖ Select Date</h3>
            <input type="date" id="selectedDate" onchange="loadDayData()">
        </div>

        <div class="dashboard">
            <div class="card meal-today">
                <h3><span class="icon">üçΩÔ∏è</span> Today's Meals</h3>
                <div id="todaysMeals" class="meal-selection">
                    <div class="empty-state">
                        <div class="icon">üçΩÔ∏è</div>
                        <p>Select a profile and date to plan your meals</p>
                    </div>
                </div>
                <div class="quick-links">
                    <a href="breakfast_options.html" class="btn btn-small">üåÖ Breakfast</a>
                    <a href="lunch_options.html" class="btn btn-small">üçΩÔ∏è Lunch</a>
                    <a href="snack_options.html" class="btn btn-small">ü•ó Snacks</a>
                    <a href="dinner_options.html" class="btn btn-small">üåô Dinner</a>
                </div>
            </div>

            <div class="card training-today">
                <h3><span class="icon">üí™</span> Today's Training</h3>
                <div id="todaysTraining">
                    <div class="empty-state">
                        <div class="icon">üí™</div>
                        <p>Select a profile to see your training plan</p>
                    </div>
                </div>
                <div class="quick-links">
                    <button class="btn btn-small" onclick="viewTraining()">View Full Schedule</button>
                </div>
            </div>

            <div class="card progress-card">
                <h3><span class="icon">üìä</span> Daily Nutrition Summary</h3>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="value" id="totalCalories">0</div>
                        <div class="label">Calories</div>
                    </div>
                    <div class="stat-box">
                        <div class="value" id="totalProtein">0g</div>
                        <div class="label">Protein</div>
                    </div>
                    <div class="stat-box">
                        <div class="value" id="totalCarbs">0g</div>
                        <div class="label">Carbs</div>
                    </div>
                    <div class="stat-box">
                        <div class="value" id="totalFat">0g</div>
                        <div class="label">Fat</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3><span class="icon">üéØ</span> Quick Actions</h3>
            <div class="quick-links">
                <button class="btn" onclick="randomizeMeals()">üé≤ Randomize Today's Meals</button>
                <button class="btn" onclick="showGroceryList()">üõí Generate Grocery List</button>
                <button class="btn" onclick="viewProgress()">üìà View Progress</button>
            </div>
        </div>
    </div>

    <script>
        let currentProfile = null;
        let currentDate = new Date().toISOString().split('T')[0];

        // Set today's date as default
        document.getElementById('selectedDate').value = currentDate;

        // Load saved profile on page load
        window.onload = function() {
            const savedProfile = localStorage.getItem('currentProfile');
            if (savedProfile) {
                selectProfile(savedProfile);
            }
        };

        function selectProfile(profile) {
            currentProfile = profile;
            localStorage.setItem('currentProfile', profile);

            // Update UI
            document.querySelectorAll('.profile-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.profile-btn.${profile}`).classList.add('active');

            loadDayData();
        }

        function loadDayData() {
            if (!currentProfile) {
                alert('Please select a profile first');
                return;
            }

            currentDate = document.getElementById('selectedDate').value;
            loadMeals();
            loadTraining();
        }

        function loadMeals() {
            const mealsKey = `meals_${currentProfile}_${currentDate}`;
            const savedMeals = JSON.parse(localStorage.getItem(mealsKey) || '{}');

            const mealsContainer = document.getElementById('todaysMeals');

            if (Object.keys(savedMeals).length === 0) {
                mealsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üçΩÔ∏è</div>
                        <p>No meals planned for this day. Click "Randomize Today's Meals" or choose from the menu.</p>
                    </div>
                `;
                updateNutritionSummary({});
            } else {
                let html = '';
                const mealTypes = ['breakfast', 'lunch', 'snack', 'dinner'];
                const mealIcons = {'breakfast': 'üåÖ', 'lunch': 'üçΩÔ∏è', 'snack': 'ü•ó', 'dinner': 'üåô'};

                mealTypes.forEach(type => {
                    if (savedMeals[type]) {
                        html += `
                            <div class="meal-item">
                                <div>
                                    <h4>${mealIcons[type]} ${type.charAt(0).toUpperCase() + type.slice(1)}</h4>
                                    <p>${savedMeals[type].name}</p>
                                </div>
                                <button class="btn btn-small" onclick="removeMeal('${type}')">‚úï</button>
                            </div>
                        `;
                    }
                });

                mealsContainer.innerHTML = html;
                updateNutritionSummary(savedMeals);
            }
        }

        function loadTraining() {
            const date = new Date(currentDate);
            const dayOfWeek = date.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const trainingDays = {
                'male': {
                    1: 'Upper Body + Core',
                    2: 'Lower Body + Cardio',
                    3: 'Active Recovery + Core',
                    4: 'Full Body Circuit',
                    5: 'Upper Body + HIIT',
                    6: 'Legs + Abs',
                    0: 'Active Recovery'
                },
                'female': {
                    1: 'Lower Body Focus (Glutes & Thighs)',
                    2: 'Upper Body + Core',
                    3: 'Glutes & Thighs Specialization',
                    4: 'Full Body Circuit + Cardio',
                    5: 'Lower Body Power + Abs',
                    6: 'Total Body Sculpting',
                    0: 'Active Recovery + Flexibility'
                }
            };

            const trainingContainer = document.getElementById('todaysTraining');
            const todaysTraining = trainingDays[currentProfile][dayOfWeek];

            trainingContainer.innerHTML = `
                <div class="meal-item">
                    <div>
                        <h4>${dayNames[dayOfWeek]}</h4>
                        <p>${todaysTraining}</p>
                    </div>
                </div>
            `;
        }

        function updateNutritionSummary(meals) {
            let totalCal = 0, totalProt = 0, totalCarbs = 0, totalFat = 0;

            Object.values(meals).forEach(meal => {
                if (meal.macros) {
                    totalCal += meal.macros.calories || 0;
                    totalProt += meal.macros.protein || 0;
                    totalCarbs += meal.macros.carbs || 0;
                    totalFat += meal.macros.fat || 0;
                }
            });

            document.getElementById('totalCalories').textContent = totalCal;
            document.getElementById('totalProtein').textContent = totalProt + 'g';
            document.getElementById('totalCarbs').textContent = totalCarbs + 'g';
            document.getElementById('totalFat').textContent = totalFat + 'g';
        }

        function randomizeMeals() {
            if (!currentProfile) {
                alert('Please select a profile first');
                return;
            }

            alert('This feature will be enhanced to randomly select meals from your recipe database. For now, please manually select meals from the menu.');
        }

        function removeMeal(mealType) {
            const mealsKey = `meals_${currentProfile}_${currentDate}`;
            const savedMeals = JSON.parse(localStorage.getItem(mealsKey) || '{}');
            delete savedMeals[mealType];
            localStorage.setItem(mealsKey, JSON.stringify(savedMeals));
            loadMeals();
        }

        function viewTraining() {
            if (currentProfile === 'male') {
                window.location.href = 'male_training_pdf.html';
            } else {
                window.location.href = 'female_training_pdf.html';
            }
        }

        function showGroceryList() {
            alert('Grocery list generator will be added in the next update!');
        }

        function viewProgress() {
            alert('Progress tracking feature coming soon!');
        }
    </script>
</body>
</html>
